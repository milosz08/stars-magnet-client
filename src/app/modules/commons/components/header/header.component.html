<!--
 ~ Copyright (c) 2023 by MILOSZ GILGA <https://miloszgilga.pl>
 ~ Silesian University of Technology
 ~ 
 ~   File name: header.component.html
 ~   Created at: 2023-05-28, 16:33:20
 ~   Last updated at: 2023-08-30, 22:39:20
 ~   Project name: stars-magnet-client
 ~ 
 ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 ~ file except in compliance with the License. You may obtain a copy of the License at
 ~ 
 ~   <http://www.apache.org/license/LICENSE-2.0>
 ~ 
 ~ Unless required by applicable law or agreed to in writing, software distributed under
 ~ the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
 ~ OF ANY KIND, either express or implied. See the License for the specific language
 ~ governing permissions and limitations under the license.
 -->

<nav
  class="navbar navbar-expand-md navbar-light bg-white shadow-sm bg-faded fixed-top">
  <div class="container">
    <button
      class="navbar-toggler navbar-toggler-right"
      type="button"
      (click)="isNavbarCollapsed = !isNavbarCollapsed"
      data-toggle="collapse"
      data-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div
      [ngbCollapse]="isNavbarCollapsed"
      class="navbar-collapse mt-3 mt-md-0"
      id="navbarSupportedContent">
      <a class="navbar-brand h1 mb-0 text-center d-block" routerLink="/"
        >Stars Magnet</a
      >
      <ul class="navbar-nav me-auto mb-2 mb-md-0">
        <li class="nav-item text-center">
          <a class="nav-link" routerLink="/companies" routerLinkActive="active"
            >Companies</a
          >
        </li>
      </ul>
      <ul class="navbar-nav align-items-center">
        <ng-template
          *ngIf="
            (isLogged$ | async) && (loggedDetails$ | async);
            then isLoggedAuths;
            else isNonLoggedAuths
          " />
        <ng-template #isLoggedAuths>
          <li ngbDropdown class="nav-item">
            <button
              type="button"
              class="nav-link border-0 bg-transparent"
              id="userDropdown"
              ngbDropdownToggle>
              {{ (loggedDetails$ | async)?.name }}
              ({{ loggedRole$ | async }})
            </button>
            <div ngbDropdownMenu aria-labelledby="userDropdown">
              <div class="px-3 mt-1">
                {{ (loggedDetails$ | async)?.username }}
              </div>
              <div class="px-3 mt-1">
                <a
                  *ngIf="(loggedRole$ | async) === companyRole"
                  [routerLink]="['/company/', (loggedDetails$ | async)?.id]"
                  class="text-secondary">
                  Company website
                </a>
              </div>
              <hr />
              <button (click)="onLogout()" ngbDropdownItem>Logout</button>
            </div>
          </li>
        </ng-template>
        <ng-template #isNonLoggedAuths>
          <li class="nav-item text-center">
            <a
              routerLink="/auth/login"
              class="nav-link"
              routerLinkActive="active"
              >Login</a
            >
          </li>
          <li class="nav-item text-center">
            <a
              routerLink="/auth/register"
              class="nav-link"
              routerLinkActive="active"
              >Register</a
            >
          </li>
          <li class="nav-item text-center">
            <a
              class="btn btn-primary btn-sm ms-2"
              routerLink="/auth/add-company"
              >Add company</a
            >
          </li>
        </ng-template>
      </ul>
    </div>
  </div>
</nav>
