<!--
 ~ Copyright (c) 2023 by MILOSZ GILGA <https://miloszgilga.pl>
 ~ Silesian University of Technology
 ~ 
 ~   File name: auth-reset-token-page.component.html
 ~   Created at: 2023-06-08, 00:40:40
 ~   Last updated at: 2023-08-30, 23:04:11
 ~   Project name: stars-magnet-client
 ~ 
 ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 ~ file except in compliance with the License. You may obtain a copy of the License at
 ~ 
 ~   <http://www.apache.org/license/LICENSE-2.0>
 ~ 
 ~ Unless required by applicable law or agreed to in writing, software distributed under
 ~ the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
 ~ OF ANY KIND, either express or implied. See the License for the specific language
 ~ governing permissions and limitations under the license.
 -->

<div class="container d-flex justify-content-center align-items-center h-100">
  <div class="row form-width max mb-4">
    <app-dimissible-alert [model]="responseAlert$ | async" />
    <div class="card">
      <form
        [formGroup]="resetTokenForm"
        (ngSubmit)="onResetTokenFormSubmit()"
        class="card-body row"
        novalidate>
        <h4 class="text-center mb-3">Reset token</h4>
        <hr />
        <div class="col-md-12 mb-3">
          <label for="user" class="form-label">Username/email address:</label>
          <input
            type="text"
            id="user"
            formControlName="user"
            class="form-control"
            maxlength="70"
            [class.is-invalid]="validateField('user')" />
          <div class="invalid-feedback">
            <div
              *ngIf="
                (resetTokenForm.get('user')!.errors | onlyFirst) === 'required'
              ">
              Username/email address field is required.
            </div>
          </div>
        </div>
        <div
          *ngFor="let control of wordsInputs; let i = index"
          class="col-md-6 mb-3 form-group">
          <label for="user" class="form-label">{{ i + 1 }} secure word:</label>
          <input
            type="text"
            [id]="'word' + i"
            [formControl]="control"
            class="form-control"
            maxlength="100"
            [class.is-invalid]="
              control.invalid && (control.dirty || control.touched)
            " />
          <div class="invalid-feedback">
            <div *ngIf="someWordsAreInvalid">
              You must provide {{ i + 1 }} secure word.
            </div>
          </div>
        </div>
        <div class="col-12 mt-2">
          <button
            [disabled]="!resetTokenForm.valid"
            class="btn btn-primary w-100 d-flex justify-content-center align-items-center gap-2">
            <div
              *ngIf="suspenseSpinner$ | async"
              class="spinner-border spinner-border-sm text-light"></div>
            Reset token
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
